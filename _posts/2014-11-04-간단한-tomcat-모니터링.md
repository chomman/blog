---
id: 1445
title: 간단한 Tomcat 모니터링
author: 정태현
layout: post
guid: http://monggu.com/?p=1445
permalink: /%ea%b0%84%eb%8b%a8%ed%95%9c-tomcat-%eb%aa%a8%eb%8b%88%ed%84%b0%eb%a7%81/
exclude:
  - 
url:
  - 
hdimage:
  - 
slide_template:
  - default
custom_sidebar:
  - Default
post_video_type:
  - youtube
categories:
  - Java
  - Linux
  - Programming
  - 소프트웨어 개발
tags:
  - java
  - jvisualvm
  - monitoring
  - tomcat
---
<img class="alignnone" alt="" src="http://cfile27.uf.tistory.com/image/25402D3D530EF93C1E9796" width="700" height="415" />

원격지의 톰캣을 모니터링을 하기 위한 방법은 여러가지가 있다.  
로컬 피씨에 자바가 설치되어 있다면 가장 간단한 방법으로 시작해 보자.

우선 원격지 톰캣의 catalina.sh 파일을 수정한다.

<pre class="lang:sh decode:true"># vi /usr/local/tomcat/bin/catalina.sh

JAVA_OPTS="$JAVA_OPTS -Dcom.sun.management.jmxremote=true \
-Dcom.sun.management.jmxremote.port=9090 \
-Dcom.sun.management.jmxremote.ssl=false \
-Dcom.sun.management.jmxremote.authenticate=false \
-Djava.rmi.server.hostname=아이피"</pre>

   
포트는 충돌하지 않는 것으로 선택해 사용한다 (예: 9090)  
호스트네임은 해당 서버의 아이피

리눅스 iptables 명령어를 이용해 해당 포트를 개방한다.

<pre class="lang:sh decode:true"># iptables -I INPUT -m tcp -p tcp --dport 9090 -j ACCEPT
# /sbin/service iptables save
# /sbin/service iptables restart</pre>

로컬 피씨에 설치된 JDK 디렉토리 내에 있는 jvisualvm.exe를 실행한다.  
Java VisualVM은 JDK에 기본 탑재된 모니터링 툴이다.  
프로그램을 실행하면 왼쪽 영역에 Remote 메뉴가 있다.  
오른쪽 마우스 클릭해서 Add Remote Host… 메뉴를 선택하고 해당 톰캣 정보를 입력.  
Remote 매뉴 하위에 추가된 서버가 표시된다.  
해당 서버를 오른쪽 마우스 클릭해서 Add JMX Connection… 해서  
Connection란에 호스트:포트 (예: 192.168.0.202:9090) 를 적어주고, Display name을 체크하자.  
호스트:포트 로 표시된 항목이 나타나며, 더블클릭하면 해당 서버의 정보를 GUI로 표시해준다.  
apache 웹서버가 깔려있다면 ApacheBench로 간단하게 스트레스 테스트를 할 수 있다.  
\# ab -n 100000 -c 10 -k http://\****



<!-- SEO Ultimate (http://www.seodesignsolutions.com/wordpress-seo/) - Code Inserter module -->

  
  
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-4058194403762977" data-ad-slot="4726363844"></ins>  
<!-- /SEO Ultimate -->